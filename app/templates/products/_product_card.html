<div class="col-lg-3 col-md-4 col-sm-6 mb-4">
    <div class="card h-100 product-card">
        <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">
            {{ product.material or 'Gemstone' }}
        </div>
        <a href="{{ url_for('products.product_detail', product_id=product.id) }}">
            {% if product.image_filename %}
            <img src="{{ url_for('static', filename='uploads/products/' + product.image_filename) }}" 
                 class="card-img-top product-image" alt="{{ product.name }}">
            {% else %}
            <img src="{{ url_for('static', filename='images/placeholder.jpg') }}" 
                 class="card-img-top product-image" alt="Placeholder">
            {% endif %}
        </a>
        <div class="card-body">
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="card-text text-muted">{{ product.description|truncate(100) }}</p>
            <div class="d-flex justify-content-between align-items-center">
                <span class="h5 text-primary">${{ "%.2f"|format(product.price) }}</span>
                <a href="{{ url_for('products.product_detail', product_id=product.id) }}" 
                   class="btn btn-sm btn-outline-primary">
                    View <i class="fas fa-arrow-right ms-1"></i>
                </a>
            </div>
        </div>
        <div class="card-footer bg-transparent">
            <small class="text-muted">
                Sold by <a href="{{ url_for('products.merchant_detail', merchant_id=product.merchant.id) }}">
                    {{ product.merchant.merchant_name }}
                </a>
            </small>
        </div>
    </div>
</div>
